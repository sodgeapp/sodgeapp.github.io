<!DOCTYPE html>
<html>
  <head>
    <title>SODGE OPEN SOURCE REDIRECT SYSTEM</title>
  </head>
  <body id="text">
    Wait... We are redirecting you...
    <p style="opacity: 0.5">If you are not redirected, make sure javascript is enabled on your browser</p>
    
    <script>
    // welcome
    console.log("loaded");
      
    // params sys
    function param(name, url) {
      if (!url) url = window.location.href;
      name = name.replace(/[\[\]]/g, "\\$&");
      var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
      results = regex.exec(url);
      if (!results) return null;
      if (!results[2]) return '';
      return decodeURIComponent(results[2].replace(/\+/g, " "));
    }
    
    // request handler
    var request = param('request');
    if (request == "emailv"){
      window.location.replace("https://sodge.ml/testing/verify?id=" + param('id') + "&code=" + param('code'));
      done();
    } else {
      document.getElementById('text').innerHTML = "Unknown request, please, make sure you wrote the correct URL.";
      console.log("error");
    }
      
    // msg
    function done(){
      console.log("done");
    }
    </script>
  </body>
</html>
